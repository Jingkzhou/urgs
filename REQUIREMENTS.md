# URGS 项目业务需求文档

## 1. 项目概述

URGS (Unified Resource Governance System) 是一套统一的资源治理与调度平台，覆盖任务调度、元数据治理、数据血缘、智能检索问答与可视化运维等能力。系统由后端服务、执行器、前端门户与智能检索服务组成，支持企业在复杂数据环境下实现标准化调度与数据治理。

## 2. 系统组成

- **urgs-api**：核心后端服务，提供任务与工作流管理、元数据治理、权限与组织管理、SQL 执行与系统监控等能力。
- **urgs-executor**：分布式任务执行器，负责拉取任务实例并执行脚本/SQL/数据同步等任务类型。
- **urgs-web**：统一管理门户，提供可视化编排、运维监控、元数据管理与系统管理界面。
- **urgs-rag**：智能检索增强服务，提供知识库录入、语义检索与 SQL 解释能力。
- **sql-lineage-engine**：SQL 血缘解析引擎，支持多方言解析与字段级血缘追踪。

## 3. 核心业务模块

### 3.1 任务调度与工作流编排

- **任务管理**：支持 Shell、SQL、Python、DataX、HTTP、存储过程等任务类型的创建与管理。
- **工作流编排**：基于 DAG 的可视化工作流设计，支持串行、并行与复杂依赖配置。
- **调度策略**：支持 Quartz Cron 表达式定时调度。
- **实例管理**：任务实例生成、状态流转、日志记录、依赖检查与补数（Backfill）。
- **依赖关系**：支持跨任务/跨工作流的依赖关系维护与查询。

### 3.2 分布式执行器

- **任务拉取**：执行器以拉模式获取待执行任务实例。
- **任务执行**：支持 Shell、SQL、Python、DataX、HTTP、存储过程等执行方式。
- **并发控制**：支持最大并发数配置与线程池执行。
- **生命周期管理**：支持执行超时、强制终止与状态回报。
- **日志采集**：采集 stdout/stderr 并持久化，供前端实时查看。

### 3.3 元数据治理与血缘分析

- **数据源管理**：统一管理各类 RDBMS、NoSQL 与大数据数据源连接。
- **模型管理**：逻辑数据模型 (LDM) 与物理数据模型 (PDM) 管理。
- **血缘追踪**：支持字段级血缘追踪与上下游依赖查询。
- **SQL 血缘解析**：支持多方言 SQL 解析与血缘输出，面向监管报送场景优化。

### 3.4 智能检索与问答 (RAG)

- **知识库录入**：支持文档、SQL、资产与血缘数据的录入与向量化。
- **语义检索**：向量检索与关键词检索混合召回。
- **SQL 解释**：基于知识库辅助 SQL 业务逻辑解释。
- **知识精炼**：支持自动生成 Q&A 索引以提升检索召回率。

### 3.5 统一管理门户

- **仪表盘**：系统运行状态与关键指标可视化。
- **运维中心**：任务在线编辑、调试、执行、日志查看与下载。
- **元数据管理**：数据源、模型、血缘可视化与维护。
- **系统管理**：用户、角色、权限、公告与版本管理。

## 4. 非功能性需求

- **高可用性**：调度中心与执行器支持集群部署，无单点故障。
- **可扩展性**：任务类型通过插件化方式扩展，血缘解析支持多方言扩展。
- **安全性**：敏感数据需加密存储；提供 RBAC 权限控制与审计能力。
- **性能**：任务就绪到执行延迟保持在秒级；支持高并发任务实例处理。
- **兼容性**：兼容主流 Linux 发行版与 JDK 17+ 环境；前端支持主流浏览器。
